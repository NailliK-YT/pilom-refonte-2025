function previewImage(e){const t=document.getElementById("imagePreview");if(e.files&&e.files[0]){const n=new FileReader;n.onload=function(e){t.innerHTML=`<img src="${e.target.result}" alt="Aperçu">`},n.readAsDataURL(e.files[0])}}function calculatePriceTTC(){const e=parseFloat(document.getElementById("price_ht")?.value)||0,t=document.getElementById("tva_id"),n=t?.options[t.selectedIndex],r=e*((parseFloat(n?.dataset.rate)||0)/100),o=e+r;document.getElementById("display-ht").textContent=formatPrice(e),document.getElementById("display-tva").textContent=formatPrice(r),document.getElementById("display-ttc").textContent=formatPrice(o)}function formatPrice(e){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e)}function addPriceTier(){const e=document.getElementById("price-tiers"),t=document.createElement("div");t.className="d-flex gap-2 mb-2 price-tier-row",t.innerHTML='\n        <input type="number" name="tier_quantity[]" class="form-control" \n               placeholder="Quantité min" min="1">\n        <input type="number" name="tier_price[]" class="form-control" \n               placeholder="Prix HT" step="0.01" min="0">\n        <button type="button" class="btn btn-danger btn-sm" onclick="this.parentElement.remove()">Supprimer</button>\n    ',e.appendChild(t)}function confirmDelete(e){return confirm(e||"Êtes-vous sûr de vouloir supprimer cet élément ?")}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("price_ht"),t=document.getElementById("tva_id");e&&t&&(e.addEventListener("input",calculatePriceTTC),t.addEventListener("change",calculatePriceTTC),calculatePriceTTC());const n=document.getElementById("productForm");n&&n.addEventListener("submit",function(e){const t=document.getElementById("name").value.trim(),n=document.getElementById("reference").value.trim(),r=parseFloat(document.getElementById("price_ht").value);return!t||t.length<3?(alert("Le nom du produit doit contenir au moins 3 caractères"),e.preventDefault(),!1):n?!r||r<0?(alert("Le prix HT doit être positif"),e.preventDefault(),!1):void 0:(alert("La référence est obligatoire"),e.preventDefault(),!1)});document.querySelectorAll(".btn").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-2px)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0)"})})});